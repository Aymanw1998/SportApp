/* ============================
   SystemToasts.css – Full + Mobile
   ============================ */

/* --- משתני עיצוב בסיסיים --- */
:root{
  --bg:#ffffff;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#475569;
  --border:#e2e8f0;
  --shadow:0 8px 30px rgba(2,6,23,.08);

  --info-bg:#eff6ff;     --info-text:#1e40af;  --info-border:#bfdbfe;
  --succ-bg:#ecfdf5;     --succ-text:#065f46;  --succ-border:#a7f3d0;
  --warn-bg:#fffbeb;     --warn-text:#92400e;  --warn-border:#fde68a;
  --err-bg:#fef2f2;      --err-text:#991b1b;   --err-border:#fecaca;

  --badge-bg:rgba(255,255,255,.85);
}

@media (prefers-color-scheme: dark){
  :root{
    --bg:#0b1220; --card:#0f172a; --text:#e5e7eb; --muted:#94a3b8; --border:#1f2937;
    --shadow:0 8px 30px rgba(255,255,255,.05);

    --info-bg:#0b1b3a;   --info-text:#93c5fd; --info-border:#1e3a8a;
    --succ-bg:#052e2b;   --succ-text:#6ee7b7; --succ-border:#065f46;
    --warn-bg:#3a2a05;   --warn-text:#fbbf24; --warn-border:#92400e;
    --err-bg:#3a0b0b;    --err-text:#fca5a5;  --err-border:#991b1b;

    --badge-bg:rgba(15,23,42,.85);
  }
}

/* --- הפחתת אנימציות לנגישות --- */
@media (prefers-reduced-motion: reduce){
  .toast, .status-badge{ transition: none !important; }
}

/* ============================
   Viewport (מגש הטוסטים)
   ============================ */
.toast-viewport{
  position: fixed;
  top: calc(12px + env(safe-area-inset-top, 0px));
  inset-inline-end: 12px;              /* תומך RTL/LTR */
  z-index: 2000;                       /* ניתן להעלות דרך inline style מה-Provider */
  pointer-events: none;                /* כדי שלא יחסום קליקים מתחתיו */
}

.toast-stack{
  max-width: 440px;
  margin-inline-start: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* מסכים בינוניים ומעלה – להצמיד לצד */
@media (min-width: 640px){
  .toast-viewport{ inset-inline: auto 12px; }
}

/* --- מובייל: פריסה רוחבית מלאה, ריווחים ידידותיים לאצבע --- */
@media (max-width: 768px){
  .toast-viewport{
    inset-inline: 8px;
  }
  .toast-stack{
    max-width: none;
    gap: 12px;
  }
}

/* ============================
   Toast item
   ============================ */
.toast{
  pointer-events: auto;
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: var(--shadow);
  padding: 12px 14px;
  background: var(--card);
  color: var(--text);
  will-change: transform, opacity;
  backdrop-filter: saturate(1.1);
}

/* פריסה פנימית */
.toast-row{ display:flex; align-items:flex-start; gap:10px; }
.toast-body{ flex:1; min-width:0; }

/* כותרת ושורה שנייה */
.toast-title{
  font-weight: 600; line-height: 1.35; margin-bottom: 2px;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.toast-desc{
  font-size: .92rem; line-height: 1.5;
  color: currentColor;                 /* שומר צבע לפי ה-variant */
  opacity: .95;
  word-break: break-word;
}

/* כפתור סגירה */
.toast-close{
  border: none; background: transparent; color: var(--muted);
  font-size: 18px; line-height: 1; cursor: pointer; padding: 2px 4px;
  border-radius: 6px;
}
.toast-close:hover{ color: var(--text); }

/* מובייל: הגדלת אזור לחיצה */
@media (max-width: 768px){
  .toast{ border-radius: 18px; padding: 14px 16px; }
  .toast-close{ padding: 8px; font-size: 20px; }
}

/* ============================
   Variants
   ============================ */
.toast.info{        background: var(--info-bg);  color: var(--info-text);  border-color: var(--info-border); }
.toast.success{     background: var(--succ-bg);  color: var(--succ-text);  border-color: var(--succ-border); }
.toast.warning{     background: var(--warn-bg);  color: var(--warn-text);  border-color: var(--warn-border); }
.toast.destructive{ background: var(--err-bg);   color: var(--err-text);   border-color: var(--err-border); }

/* ============================
   Status badge (סרגל סטטוס תחתון)
   ============================ */
.status-badge{
  position: fixed;
  inset-block-end: calc(12px + env(safe-area-inset-bottom, 0px));
  inset-inline: 12px;
  z-index: 1999;          /* מעט מתחת ל-toast-viewport */
  direction: rtl;
}

@media (min-width: 640px){
  .status-badge{ inset-inline: auto 12px; }
}

.status-box{
  display:inline-flex; align-items:center; gap:12px;
  border-radius:14px; border:1px solid var(--border);
  background: var(--badge-bg);
  padding: 8px 12px; box-shadow: var(--shadow);
  backdrop-filter: blur(6px);
  color: var(--text); font-size: .92rem;
}

.status-seg{ display:inline-flex; align-items:center; gap:6px; }
.label{ opacity: .85; }
.split{ width:1px; height:16px; background:var(--border); opacity:.7; }

/* נקודות מצב */
.dot{ width:10px; height:10px; border-radius:50%; display:inline-block; }
.dot.ok{   background:#10b981; }
.dot.warn{ background:#f59e0b; }
.dot.bad{  background:#ef4444; }

/* מובייל: מעט גדלים קריאים יותר */
@media (max-width: 768px){
  .status-box{ font-size: .95rem; border-radius: 16px; }
  .dot{ width: 12px; height: 12px; }
}
